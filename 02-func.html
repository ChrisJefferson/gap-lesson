<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: Lesson Title</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <a href="index.html"><h1 class="title">Lesson Title</h1></a>
          <h2 class="subtitle">Topic Title</h2>
          <section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives"><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Use command line for prototyping</li>
<li>Create functions</li>
<li>Read GAP code from a file</li>
</ul>
</div>
</section>
<p>Letâ€™s consider the following exercise: for a finite group <em>G</em>, calculate the average order of its element (that is, the sum of orders of its elements divided by the order of the group).</p>
<p>We begin with a very straightforward approach, iterating over all elements of the group in question:</p>
<pre class="gap"><code>S:=SymmetricGroup(10);</code></pre>
<pre class="output"><code>Sym( [ 1 .. 10 ] )</code></pre>
<pre class="gap"><code>sum:=0;</code></pre>
<pre class="output"><code>0</code></pre>
<pre class="gap"><code>for g in S do
  sum := sum + Order(g);
od;
sum/Size(S);</code></pre>
<pre class="output"><code>39020911/3628800</code></pre>
<p>Now assume that we would like to save this fragment of the GAP code and later repeat this calculation for some other groups. We may even reformat it to fit it into one line and use double semicolon to suppress the output of <code>sum</code>:</p>
<pre class="gap"><code>sum:=0;; for g in S do sum := sum + Order(g); od; sum/Size(S);</code></pre>
<pre class="output"><code>39020911/3628800</code></pre>
<p>Now we may copy and paste it into the GAP session when we will need it next time. And here we see the first inconvenience: the code expects that the group in question must be stored in a variable named <code>S</code>:</p>
<pre class="gap"><code>S:=AlternatingGroup(10);</code></pre>
<pre class="output"><code>Alt( [ 1 .. 10 ] )</code></pre>
<pre class="gap"><code>sum:=0;; for g in S do sum := sum + Order(g); od; sum/Size(S);</code></pre>
<pre class="output"><code>2587393/259200</code></pre>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h2 id="for-prototyping-only"><span class="glyphicon glyphicon-pushpin"></span>For prototyping only</h2>
</div>
<div class="panel-body">
<p>This approach is good for a rapid prototyping only:</p>
<ul>
<li>incidentally, one could copy and paste only a part of the code, and incomplete input may trigger a break loop;</li>
<li>even more dangerous: one could forget to reset <code>sum</code> to zero prior to the new calculation and obtain incorrect results;</li>
<li>the group in question may have a different variable name, so the code will have to be changed;</li>
<li>finally, when GAP code is pasted into the interpreter, it is evaluated line by line. If you have a long file with many commands, and the syntax error is in the line N, this error will be reported only when GAP will complete the evaluation of all preceding lines, and that might be quite time-consuming.</li>
</ul>
</div>
</aside>
<p>Next we will consider giving GAP code more structure by organising it into functions:</p>
<ul>
<li>functions are parsed first and may be called later;</li>
<li>any syntax errors will be detected in the parsing stage, and not at the time of the call;</li>
<li>functions may have local variables, and this prevents them being accidentally overwritten just because of reusing the same name of the variable to store something else.</li>
</ul>
<p>The following function takes an argument <code>S</code> and computes the average order of its elements:</p>
<pre class="gap"><code>AvgOrdOfGroup := function (S)
local sum, g;
sum:=0;
for g in S do
  sum := sum + Order(g);
od;
return sum/Size(S);
end;</code></pre>
<pre class="output"><code>function( S ) ... end</code></pre>
<p>Now we can apply it to another group, passing the group as an argument:</p>
<pre class="gap"><code>A:=AlternatingGroup(10); AvgOrdOfGroup(A); time;</code></pre>
<pre class="output"><code>Alt( [ 1 .. 10 ] )
2587393/259200
837</code></pre>
<p>The example above also demonstrates <code>time</code> - this is the variable which stores the CPU time in milliseconds spent by the last command.</p>
<p>Thus, now we may create new groups and reuse <code>AvgOrdOfGroup</code> to calculate average order of their elements in the same GAP session. Our next goal is to make it reusable for the future calculations.</p>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h2 id="paths"><span class="glyphicon glyphicon-pencil"></span>Paths</h2>
</div>
<div class="panel-body">
<p>Fully understand to to specify paths to files in all operating systems.</p>
</div>
</section>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
  </body>
</html>
